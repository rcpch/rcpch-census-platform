from rest_framework import (
    viewsets,
    serializers,  # serializers here required for drf-spectacular @extend_schema
)
from rest_framework.decorators import api_view
from rest_framework.views import APIView, Response
from rest_framework.exceptions import ParseError
from django_filters.rest_framework import DjangoFilterBackend

from drf_spectacular.utils import (
    extend_schema,
    extend_schema_view,
    OpenApiParameter,
    OpenApiExample,
    OpenApiResponse,
    PolymorphicProxySerializer,
)
from drf_spectacular.types import OpenApiTypes

from ..models import Organisation
from ..serializers import OrganisationSerializer


@extend_schema_view(
    request=OrganisationSerializer,
    responses={
        200: OpenApiResponse(
            response=OpenApiTypes.OBJECT,
            description="Valid Response",
            examples=[
                OpenApiExample(
                    "/organisations/1/",
                    external_value="external value",
                    value={
                        "ods_code": "RGT01",
                        "name": "ADDENBROOKE'S HOSPITAL",
                        "website": "https://www.cuh.nhs.uk/",
                        "address1": "HILLS ROAD",
                        "address2": "",
                        "address3": "",
                        "telephone": "01223 245151",
                        "city": "CAMBRIDGE",
                        "county": "CAMBRIDGESHIRE",
                        "latitude": 52.17513275,
                        "longitude": 0.140753239,
                        "postcode": "CB2 0QQ",
                        "geocode_coordinates": "SRID=27700;POINT (0.140753239 52.17513275)",
                        "active": "true",
                        "published_at": "null",
                        "paediatric_diabetes_unit": {"pz_code": "PZ041"},
                        "trust": {
                            "ods_code": "RGT",
                            "name": "CAMBRIDGE UNIVERSITY HOSPITALS NHS FOUNDATION TRUST",
                            "address_line_1": "CAMBRIDGE BIOMEDICAL CAMPUS",
                            "address_line_2": "HILLS ROAD",
                            "town": "CAMBRIDGE",
                            "postcode": "CB2 0QQ",
                            "country": "ENGLAND",
                            "telephone": "null",
                            "website": "null",
                            "active": "true",
                            "published_at": "null",
                        },
                        "local_health_board": "null",
                        "integrated_care_board": {
                            "boundary_identifier": "E54000056",
                            "name": "NHS Cambridgeshire and Peterborough Integrated Care Board",
                            "bng_e": 536856,
                            "bng_n": 268346,
                            "long": 0.005437,
                            "lat": 52.2962,
                            "globalid": "456aed5c-f453-4a7d-a73b-cc3c3fe82637",
                            "geom": "SRID=27700;MULTIPOLYGON (((546710.385 317809.097999999, 546517.3148 316480.835200001, 545788.813 314470.437000001, 545740.2333 312761.7863, 545682.3478 311560.5932, 545927.188 311291.25, 546590.4624 311382.977600001, 547466.621 311108.409, 547797 311147.5, 547730.387 310803.499, 547570.5721 310495.520300001, 547797 310507, 547811.594 309957.092, 547812.813 308673.125, 547300.9125 308660.9344, 547450.875 308325.312000001, 546859.007 308320.812000001, 547039.301 307874.122, 548112.17 306832.739, 550326.7745 304981.855, 549769.125 304532.312000001, 550222.188 304167.405999999, 549434.606 303840.267999999, 549290.36 303314.807, 549186.686 302867.788000001, 548520.5398 302667.2818, 548704.875 301625, 549064.6095 301601.282, 549338.875 300307.594000001, 550233.302 300262.687000001, 550159.205 299955.416999999, 550434.813 299324.687000001, 549592.937 298698.312000001, 550396.499 298169.096999999, 550198.625 297673.812000001, 549567.375 297482.719000001, 549619.563 296732.344000001, 550258.613 296886.093, 550042 296448.655999999, 549542.125 296452.094000001, 550195.493 295666.881999999, 549715.313 295171.187000001, 549883.3095 294757.347999999, 550338.1498 294990.011600001, 550711.813 294653.030999999, 551059.625 295069.905999999, 551413.812 294562.094000001, 550871.001 294100.095000001, 550932.948 293820.823999999, 550691.803 294009.582, 549782.311 293590.812000001, 551873.311 292281.002, 552034.125 292497.089, 552558.62 291478.582, 553239.688 292370.687000001, 556807.376 293141.188999999, 557347.813 293090.094000001, 557435.625 292497.312000001, 558388.5 292627.780999999, 559270.875 291891.75, 560438.688 291623.280999999, 560767.808 291883.595000001, 561165.886 290601.004000001, 561773.125 289508.094000001, 562549.001 289087.187000001, 563258.688 287994, 565113.309 286848.594000001, 564783.063 286435.937000001, 565236.807 284823.579600001, 564828.938 284535.875, 564984.938 284136.625, 563137.7598 282870.3638, 561625.6048 281731.331, 562171.255 280253.119999999, 564026.188 276467.594000001, 564838.625 276074.5, 564879.5216 275575.1666, 565955.188 275473.780999999, 566460.0052 275112.5538, 565919.843 273374.589400001, 565288.188 272889.405999999, 565780.311 271560.186000001, 567604.313 271528.999, 567945.625 270707.687000001, 568698.876 270190.907, 569274.714 269765.166999999, 570936.393 268310.843800001, 570355.313 267623.594000001, 570585.19 266813.096999999, 565560.188 264732.375, 564508.5904 266166.6874, 563500.7722 267401.2974, 562810 267661.594000001, 562848.492 268439.122, 562489.115 268771.524, 562268.8539 268562.8105, 561073.187 269253.469000001, 561004.806 268288.192, 560442.644 267579.99, 560712.714 267089.897, 560593.852 266882.607999999, 559857.405 265778.479, 561219.806 263961.887, 560985.442 263515.066099999, 560045.322 263045.492000001, 561090.8694 262159.744999999, 562052.807 261353.318399999, 562665.779 261942.613, 562946.4675 262208.947799999, 563656.876 261865.094000001, 564160.125 262410, 564596.84 262851.572000001, 565424.31 262927.069, 565408.691 262993.645, 564928.699 263820.086999999, 565756.829 264486.9834, 566920.023 263305.280400001, 567396.378 263399.101, 567731.188 263884.625, 568410.3965 263104.0045, 568871 263116, 569467.5 262288.187000001, 570450.392 263049.392000001, 570977.785 262507.227, 571833.375 261707.891000001, 571754.188 260400.875, 571133.8866 259485.616599999, 571136.846 258260.002, 570646.813 257431.078, 570605.375 256623.892999999, 570205.688 255307.703, 570488.111 254794.726500001, 569515.125 255036.203, 569086.193 254541.501, 568515.813 255385.203, 567805.805 255606.998, 567264.624 255350.699999999, 567273.814 254638.594000001, 566861.716 254690.514, 566719.375 254042.405999999, 565445.31 253978.797, 565705.813 253579.203, 565606.625 251206.547, 565039.813 251192.391000001, 564696.188 250611.780999999, 564981.688 250000.016000001, 564068.812 249748.904999999, 564299.1085 249430.489499999, 563695.375 249245.905999999, 563285.062 247432.875, 564153.998 246884.876, 563897.386 246043.232000001, 564143.563 245589.187000001, 564505.313 245582.108999999, 564714.59 244292.300000001, 565076.125 244109.905999999, 564926.624 243518.903999999, 563971.171 242906.880000001, 563269.5 241689.891000001, 563878.875 241059.203, 564008.689 240256.295, 562772.813 240316.298, 562209.312 240993.655999999, 560812.813 241771.483999999, 559227.866 244312.9924, 556102.614 246217.264, 554425.751 244472.450999999, 553233.7223 245760.994899999, 551046.375 246103.141000001, 550454.25 244171.453, 549898.808 243978.703, 550220.9845 242686.071, 549996.694 242062.903999999, 548713.195 241839.471000001, 548655.3014 241079.903999999, 548267.813 241096.096999999, 548243.376 241502.589, 547704.688 241288.405999999, 547592.313 241567.155999999, 546034.691 240905.801999999, 545372.625 242293.358999999, 544457.124 242299.903000001, 544507.4465 241130.290999999, 543753.813 239231.405999999, 543656.563 237979.844000001, 542894.597 236454.112, 542051.442 236168.088, 542492.187 235632.203, 542184.313 233751.596999999, 542049.81 233276.407, 540441.375 233787.391000001, 540493.687 234026.703, 540081.188 233954.594000001, 539829.809 234306.898, 539648.62 234013.501, 538908.1878 234204.853499999, 539038.999 233699.608999999, 538121.5 233439.5, 538044.5 233719.296, 537459.885 233592.613, 537156 234657.798, 535772.688 235034.203, 535339.549 233536.073999999, 534162.193 233050.595000001, 533246.808 234784.297, 532567.312 234953.5, 532346.875 235915.405999999, 531194.813 236162.891000001, 530423.688 236832.297, 528983.881 237274.698999999, 529031.501 237342.905999999, 528645.445 237488.775, 528910.494 238465.346999999, 528081.688 240291, 527343.125 240352.844000001, 526661.6488 240911.023399999, 527071 242848.797, 526365.626 244062.280999999, 526853.155 245371.7019, 527085.688 250500.405999999, 526730.875 250552.655999999, 526390.188 251173.108999999, 525228.306 250597.799000001, 523020.4048 250980.8676, 522394.503 250968.773, 521683.124 251038.558, 520884.725 251071.581, 522090.303 252660.005000001, 521232.813 253474.375, 519783.218 254114.403999999, 519028.858 254551.548, 519753.312 255455.794, 520153.188 255277.799000001, 520261.701 255768.248, 520357.112 256118.284, 518662.406 257805.405999999, 518859.944 258271.322000001, 518467.121 258208.535, 518019.4688 258123.8706, 516960.971 257962.612600001, 516476.319 258365.093, 516249.713 259013.539999999, 516267.521 259398.215, 516631.9144 260285.254000001, 516716.719 260394.7414, 517159.782 261167.279999999, 516638.31 261627.843, 515243.53 261427.814999999, 514803.219 261830.375, 513761.375 261825.655999999, 513202.823 261700.676000001, 513399.3035 260455.950999999, 512157.844 260882.562000001, 511114.787 260665.707, 510507.686 264625.585999999, 510561.813 265119.562000001, 511163.901 265173.596999999, 510953.062 265944.4345, 510568.188 266180.280999999, 509724.313 266128, 509322.3505 265714.4055, 508760.063 266675.312000001, 508545.594 266339.125, 507752.719 266371.937000001, 507682.313 266863.062000001, 506770.0914 267653.665999999, 506705 269634.312000001, 506153.8165 269595.8125, 504689.403 270534.999, 504563.8131 272309.805, 503427.3402 272511.2237, 503813.895 273349.017999999, 502332 274618.437000001, 502262.4964 275384.3928, 502992.906 276181.905999999, 502474.597 276782.192, 503102.5 276741.405999999, 503231 277033.405999999, 504247.281 276861.780999999, 504349 277197.405999999, 505130.156 277151.25, 505251.131 277529.073000001, 506016.094 277340.25, 506723.896 278743.313999999, 507846.688 279575.594000001, 507602.594 279985.905999999, 507764.905 280465.094000001, 508186.308 280607.282, 511427.591 282987.188999999, 510775.906 283365.094000001, 511964.688 285975.407, 512234.31 286191.814999999, 512757.499 286735.5, 512190.337 287384.16, 512309.506 287871.3462, 511485.813 289280.719000001, 511484.935 290089.233999999, 511946.215 290765.598999999, 511790.905 291114.812000001, 510180.094 291541.594000001, 509288.188 292498.903000001, 507759.262 293105.459000001, 507733.125 293464.937000001, 508443.188 294201.812000001, 508388.499 295017.905999999, 508449.688 295694.187000001, 507541.5 296033.812000001, 507235.031 296851.5, 508056.499 297436.377499999, 507472.125 298096.655999999, 507472.3176 299057.920399999, 506809.813 299451.812000001, 503854.5 298555.094000001, 503186.181 298398.420499999, 503175.992 298820.311000001, 502293.594 299230.280999999, 501879.189 299840.502, 502341.094 300260, 502670.688 301562.812000001, 502968.313 301636.593, 503034.906 302935.807, 503434.901 302942.405999999, 503614.001 303337.905999999, 503417.688 304477.812000001, 502550.1615 305147.971999999, 502370.099 304967.216, 501950.096 305791.095000001, 502643.788 306452.684, 503260.281 306346.5, 503212.002 306752.403000001, 503763.594 306895.904999999, 504752.806 306844.284, 504914.1769 307390.687100001, 507051.592 306621.312000001, 507966.405 306783.812000001, 508586.9224 307290.3192, 510829.094 308187.096999999, 511058.093 308183.808, 512359.594 308885.405999999, 512620.812 309846.404999999, 513263.1347 309776.418, 513826.194 309889.59, 514367.478 309756.912799999, 515428.873 309319.960999999, 515787.58 309426.885, 517895.001 307411.095000001, 520168.219 309004.405999999, 520976.097 309159.719000001, 521409.267 309325.569499999, 522343.406 307608.904999999, 523189.594 308534.187000001, 525850.188 307594.501, 525946.125 307970.312000001, 528418.4032 309965.2753, 529405.313 309387.405999999, 530283.875 310000, 530903.887 310007.964, 531006.375 310370, 531399.309 310254.502, 532299.6386 309733.3344, 533178.188 309330.999, 533246.1144 308906.824200001, 536804.313 309378.686000001, 538546.0208 311226.8868, 538448.0324 312316.890799999, 538179.7151 314926.680400001, 538427.125 315423.812000001, 539472.376 316416.594000001, 541178.063 316047.25, 541818.5 316807.719000001, 542825.383 316798.197000001, 544097.063 317872.562000001, 546606.623 318013.311000001, 546710.385 317809.097999999)))",
                            "ods_code": "QUE",
                            "publication_date": "2023-03-15",
                        },
                        "nhs_england_region": {
                            "region_code": "Y61",
                            "publication_date": "2022-07-30",
                            "boundary_identifier": "E40000007",
                            "name": "East of England",
                            "bng_e": 565970,
                            "bng_n": 255923,
                            "long": 0.425889,
                            "lat": 52.1766,
                            "globalid": "44d74905-3f31-41b7-936e-6dfb55e0047e",
                            "geom": "SRID=27700;MULTIPOLYGON (((596672.8002 191182.899800001, 595752.6995 188887.4, 594632.699 191154.200999999, 596117.3998 192362.8002, 596672.8002 191182.899800001)), ((600000.0034 189456.122199999, 598787.4998 188343.896500001, 595950.5969 188848.801899999, 597310.1991 190790.796, 596671.3966 192122.9047, 598661.0003 192375.0998, 599100.7998 194504.1998, 600000.0098 194651.6821, 604827.1967 195443.404200001, 603038.8002 192243.6009, 600000.0034 189456.122199999)), ((592644.8997 206301.0997, 591595.8001 205851.4999, 590340.4008 206459.100500001, 591951.3001 206745.399800001, 592644.8997 206301.0997)), ((588609.3016 205703.997199999, 587323.4001 205680.199999999, 588063.6023 207039.504899999, 588609.3016 205703.997199999)), ((603323.5036 212554.496300001, 600321.5997 212394.701099999, 600011.8006 212979.104599999, 602971.5961 216106.2995, 604677.9033 216389.498400001, 607334.0938 215479.536599999, 607333.4156 215443.6855, 606753.3998 214534.0998, 603323.5036 212554.496300001)), ((624822.8962 224336.003699999, 624874.7988 223412.798, 623925.5037 224148.397399999, 624517.598 224328.096000001, 624822.8962 224336.003699999)), ((624620.3012 225265.4, 624749.5976 224412.901699999, 624162.3019 224558.0002, 624620.3012 225265.4)), ((624248.8002 225587.199899999, 623464.1009 223892.900800001, 622150.0002 224528.399700001, 622360.4015 225246.303300001, 624248.8002 225587.199899999)), ((625698.802 225163.4969, 625318.6254 224881.5646, 624694.299 225883.500299999, 625698.802 225163.4969)), ((592868.5723 343928.7434, 591691.3961 343888.0023, 592608.0985 346295.0033, 595609.6611 344860.078600001, 594942.9097 344415.5777, 593069.656 344267.410700001, 592868.5723 343928.7434)), ((600000.0213 346650.304500001, 610004.1963 343886.8028, 619999.9838 342615.6928, 621665.2378 342403.931500001, 622306.8484 342163.0788, 626090.3033 339999.979800001, 630785.0002 337315.9001, 636603.0666 332795.596000001, 642768.7873 327809.222899999, 644689.6896 325899.002599999, 649980.6801 319871.656199999, 652888.8039 312063.0023, 653508.6015 303816.2028, 652793.6752 304775.6785, 653015.9256 303680.3014, 653432.9036 303692.098300001, 653009.998 302860.6963, 653169.8927 302119.212099999, 653126.191 301993.5, 653167.1794 301881.0436, 653607.2236 299999.9734, 653779.1676 299264.959000001, 653818.3488 299167.2152, 655644.798 293736.3982, 655269.8002 293192.100199999, 655202.7001 292589.4998, 654235.4563 290606.449200001, 653999.4723 290131.0461, 653870.1969 289891.286499999, 653869.1098 289855.363, 653852.3003 289820.9001, 653700.7804 284576.414899999, 652927.1474 281969.1033, 652299.8675 279999.995100001, 650620.0999 274726.9998, 650095.147 274516.719699999, 650061.9035 274503.4034, 649679.416 273773.1063, 648952.994 273168.005999999, 648016.948 270761.454, 648012.6786 270590.744999999, 647925.4 270424.1009, 647709.5039 260459.9035, 647608.3029 260000.011499999, 645339.5477 249690.012499999, 640000.0279 246099.391799999, 639101.0993 245494.8971, 640000.0244 246159.743899999, 642803.4999 248233.199999999, 641166.0996 247783.971799999, 640690.3007 247057.600299999, 640054.0997 247151.9998, 639999.981 247087.93, 637878.392 244576.2346, 637521.869 244351.4661, 635694.3422 239999.970799999, 635525.6468 239598.293, 633149.1959 237527.697799999, 632696.8965 238859.5964, 630811.8035 239529.104900001, 632950.3003 237749.204399999, 632816.7963 236630.4046, 629921.2992 233998.6998, 628326.38 231287.717599999, 628117.0055 232375.280300001, 627985.193 233237.709000001, 627958.8531 233255.3467, 627956.5966 233270.396400001, 627942.96 233279.331599999, 627940.19 233293.720000001, 627882.0004 233319.274499999, 627015.3922 233887.1072, 626393.119 234303.794, 626383.8398 234300.923, 625829.8254 234663.9331, 625592.3995 234819.503, 625539.7925 235376.190400001, 625309.0979 237817.401000001, 620783.5995 239111.1044, 620000.0014 239587.0736, 619320.1525 240000.024, 618391.5858 240564.0493, 618081.1966 240752.5844, 616876.5515 241633.4999, 616400.7971 241981.402799999, 617682.4535 239999.963199999, 617789.9992 239833.6976, 619999.9672 238372.022, 620563.5003 237999.3005, 624441.0015 237192.703600001, 625139.8945 233916.0448, 624802.1417 233811.5437, 622896.2975 234180.695800001, 621336.703 233158.8983, 620000.0006 233292.8324, 619102.0997 233382.799799999, 617396.1999 234953.3002, 615202.6999 232968.0997, 612134.9005 233435.9002, 610985.6324 232432.791300001, 610971.7857 232420.705600001, 610802.1 232272.5998, 610462.3758 232753.7413, 610444.7095 232778.761499999, 610272.3999 233022.798599999, 610356.5762 232835.130899999, 610364.3323 232817.8389, 610638.9006 232205.7005, 609949.9026 232682.704600001, 610529.5975 231921.403100001, 614512.9005 231432.9013, 617968.6999 232469.700300001, 619179.7002 231714.300899999, 620000.003 231926.8671, 621337.2966 232273.401799999, 621935.5997 231693.798800001, 623181.7993 232754.1042, 625359.0009 231829.5, 626247.0357 232919.6558, 626669.5798 231628.876700001, 626709.7181 231475.0976, 625884.2005 231558.5964, 623830.3002 229371.4, 623495.1033 226397.703600001, 622483.7971 225920.000299999, 622015.6013 227716.5962, 621092.3029 226877.996200001, 622238.6999 226255.799900001, 621152.9998 226190.6, 620251.6037 225527.4022, 621023.4991 224860.399800001, 620000.0063 224439.9297, 618884.6 223981.6998, 620000.0136 223995.763800001, 620922.8005 224007.399, 622020.4989 225136.9046, 621269.9012 223919.303200001, 622339.8961 224262.9048, 622695.8026 222325.4026, 622988.4002 223106.799699999, 623822.4982 223181.304400001, 623896.7037 222494.701099999, 624039.7002 223352.8002, 625239.1975 223395.203, 625021.8 224882.8982, 626611.602 224494.934800001, 626551.1072 223922.565400001, 625920.5863 222438.986099999, 625626.5128 221984.9, 623953.3053 219999.994899999, 621703.6724 217331.2837, 620000.017 216096.196900001, 617738.8375 214456.925799999, 615846.8672 213294.102600001, 612012.0823 212520.096899999, 610060.512 212306.3882, 609015 214343.100099999, 609525.6147 213690.9901, 609586.6994 214514.295299999, 608164.4988 215710.500299999, 610345.3027 215814.7029, 611240.2451 216914.292199999, 611434.37 217540.050000001, 611521.6008 218056.201300001, 611247.1001 217669.699899999, 611322.01 217516.630000001, 610935.0142 216938.4213, 608729.3037 216104.899900001, 606473.1004 217273.895199999, 605702.6737 218627.896400001, 606184.8036 219763.002800001, 605860.4347 220000.014900001, 605388.6535 220344.7018, 605419.1214 220000.014900001, 605649.2001 217397.100099999, 603595.8458 218087.774499999, 605641.0579 216796.9439, 602065.6371 216190.295399999, 602588.1007 215992.1017, 600561.5558 215170.832699999, 599999.9945 213945.608100001, 599455.1295 212756.811799999, 597711.6701 213393.845100001, 597873.1681 213247.6976, 599830.401 211476.504799999, 597456.4005 211666.8003, 597227.798 212342.3969, 596202.907 212069.486500001, 599047.3001 210485.3993, 597281.9998 208870.3003, 596711.5994 208458.498600001, 594367.1988 208169.101500001, 592861.4033 208850.796399999, 592645.3003 207894.9, 591793.503 208678.595699999, 589036.6009 206952.600199999, 587450.7963 207804.396, 586955.5001 206255.4001, 585649.4978 207012.4026, 587395.9007 205117.495100001, 591422.2032 204697.7952, 589344.7034 202263.901900001, 590650.1027 202705.195599999, 591291.9972 204067.695599999, 593249.4983 204744.0019, 593058.9962 205842.397600001, 594858.7034 206246.002, 596076.3354 205700.375299999, 598234.2814 206513.9769, 599897.1 208884.1998, 600000.0251 208910.104900001, 601780.2094 209358.1581, 602456.017 209321.098099999, 603851.5 207681.600500001, 603383.9046 199999.9737, 603198.665 196956.8698, 601959.0516 196001.050100001, 601137.9028 195505.896400001, 600000.0218 195413.173, 598011.1001 195251.100299999, 593528.0991 195556.400599999, 591481.7915 196860.093599999, 591536.8565 196800.1231, 591890.1373 196415.370200001, 592830.8997 195391.1, 598497.3973 194638.5046, 598595.802 192821.3047, 595411.6003 192673.0985, 594396.7985 193744.2006, 595344.6999 192513.1, 592431.9675 190816.378599999, 594482.8 191203.5997, 593661.504 190082.298800001, 594661.901 190387.6009, 595409.7999 188552.899800001, 597711.5028 188010.002, 595734.4551 186185.869100001, 595732.362 186184.0419, 593149.6002 183929.3002, 585272.9 185538.899700001, 583382.4028 185775.7015, 582295.2009 185397.1, 582285.1119 185394.009, 582269.4237 185389.202500001, 581137.8586 185042.5177, 580000.0204 185333.8201, 577660.3964 185932.796499999, 580000.0045 184591.928400001, 580358.0979 184386.699100001, 582650.497 183985.0041, 581788.0966 183353.604800001, 583030.6003 183634.6997, 580000.0126 182430.623400001, 578677.804 181905.2995, 577298.2981 182091.496200001, 576936.995 182509.811799999, 576935.0329 182512.0836, 576776.1207 182696.0715, 576776.1089 182696.085200001, 576306.4996 183239.7974, 575545.0023 182960.8972, 574710.0138 184216.179300001, 574710.027 184216.1274, 575098.3003 182686.6, 576439.2039 182359.6994, 574166.0982 181455.598099999, 570512.0026 181515.1011, 569850.6992 180528.5035, 569770.111 179999.9594, 569435.5027 177805.403100001, 568939.9999 176169.1007, 567188.402 175514.5988, 562743.2001 175192.3003, 561117.2005 177567.299799999, 560000.0114 177363.1579, 559683.9041 177305.396199999, 558582.1 176070.700200001, 553651.3646 179073.888, 553651.3419 179073.901799999, 553794.621 179779.255999999, 554880.625 180182.405999999, 554622.5 180975.5, 555687.938 181164.298, 555313.188 182418.125, 556099.125 183481.716, 556473.813 182292.562000001, 557157.063 182311.75, 557223.388 183903.283, 561956.688 184981.885, 560412.307 187750.499, 558841.312 187532.001, 557304.938 191410.297, 556199.125 191601.405999999, 556906.688 192371.5, 556018 193395.703, 554024.973 194889.253, 552402.374 194083.111, 547962.875 193803, 543643 191573.608999999, 540036.313 194159.702, 540060.808 195527.295, 537625.141 196029.765000001, 537543.808 199883.108999999, 531087.875 200932.483999999, 527045.188 200413.404999999, 525209.938 197678.437000001, 524339.313 198344.358999999, 523753.711 197351.993000001, 521110.906 196700.5, 520681.782 195107.407, 517435.188 194421.094000001, 516579.227 194866.880999999, 510782 191691.890000001, 508059.5 192402.812000001, 506926.812 191511.703, 504122.188 193613.203, 503946.088 190047.434, 502556.188 190258.703, 501183.005 194258.040999999, 501296.594 196772.905999999, 502277.806 196544.903000001, 502379.421 197620.290999999, 503466.595 198202.202, 503033.688 198952, 500431.406 199208.395, 500723.469 200787.937000001, 499364.094 202436.797, 500229.688 204533.797, 499269.5 205520.797, 498494 205219.391000001, 497676.594 206880.202, 495853.404 206323.596000001, 491899.218 208334, 490430.755 211218.780999999, 490745.5 212098.391000001, 489058.28 214331.958000001, 488032.406 214048.141000001, 486504.501 216670.700999999, 488424 218390.094000001, 489873.188 218529.75, 490552.5 217552.297, 489971.049 216636.652000001, 491968.25 213858.453, 494320.307 214362.103, 497872.402 212979.501, 499280.906 215585.703, 499772.598 215220.505999999, 500465.095 214990.096000001, 500864.719 215765, 497615.405 220030.187000001, 495068.812 221668.093, 492871.281 221772.094000001, 491396.5 223409.594000001, 489920.125 223268.953, 485408.969 228212.828, 483607.375 227767.344000001, 482728.786 228585.998, 482935.499 226466.798, 481796.313 226541.5, 479973.721 229388.34, 482262.999 232568.702, 481927.813 234214.391000001, 477511.289 238583.187000001, 478787.813 239766.108999999, 478068.406 240892.703, 479652.219 241239.671, 480191.715 242151.607999999, 479109 244310.5, 477531.041 245234.52, 477379.281 246535.5, 476309.22 246792.219000001, 476720.663 248147.833000001, 480042.094 248747.607000001, 480025.906 250129.594000001, 481254.689 250014.801000001, 482051.905 251830.895, 482740.311 251024.704, 483680.062 252980.877, 484533.719 253254.407, 484783.5 252411.094000001, 488843 255800.5, 491131.686 256033.991, 493169.69 259663.700999999, 491970.189 264199.812000001, 495387.281 265427.905999999, 498005 262666.625, 499618.281 262988.594000001, 500321.904 264597.192, 499542.719 266755.594000001, 501390.313 269547.5, 500989.597 269872.593, 504689.403 270534.999, 504563.813 272309.805, 503427.823 272505.710000001, 503789.313 273405.312000001, 502332 274618.437000001, 502992.906 276181.905999999, 502474.597 276782.192, 506166.594 277470.219000001, 507764.905 280465.094000001, 511427.591 282987.188999999, 510880.718 283686.926999999, 512757.499 286735.5, 511490.152 289255.904999999, 511790.905 291114.812000001, 507722.406 293158.625, 508526.094 294623.5, 507235.031 296851.5, 508056.5 297436.312000001, 507472.314 299057.905999999, 503186.189 298398.405999999, 501879.189 299840.502, 503614.001 303337.905999999, 501950.096 305791.095000001, 504763.906 307404.5, 507959.188 306780.719000001, 511676.406 308374.312000001, 512672.813 309872.405999999, 515777.594 309433.812000001, 517762.812 307382.094000001, 521409.313 309325.594000001, 522343.406 307608.904999999, 523189.594 308534.187000001, 525850.188 307594.501, 528418.497 309965.189999999, 529411 309388.187000001, 531011.188 310371.095000001, 533246.124 308906.780999999, 536748.875 309359.405999999, 538600.188 311308.687000001, 538179.688 314926.687000001, 539436.313 316397.282, 541180 316042.187000001, 544097.063 317872.562000001, 546710.385 317809.097999999, 547711.625 317540.719000001, 553378 321886.094000001, 551507.813 323131.905999999, 552888.8444 326676.8651, 552888.9997 326676.845100001, 552994.1006 326663.302999999, 557223.8 327041.300000001, 557786.1111 326680.349199999, 557806 326486, 557837.5506 326647.3299, 558575.4 326173.699999999, 559680.0041 324128.0986, 559999.9784 323333.316500001, 560243.7437 322727.829399999, 559999.9784 323594.2305, 559691.3988 324690.997400001, 559503.1602 325145.5449, 559085.4984 326483.728599999, 560000.0279 327251.369100001, 564722.7003 331215.5, 564681.1002 333512.300100001, 566806.7068 339999.963400001, 567425.2998 341888, 570753.6002 345077.0001, 572160.5036 345207.604599999, 572787.0981 344263.001, 573768.7002 344884.5, 574972.3003 344306.8013, 573949.2037 345290.401000001, 575877.3998 345012.300000001, 575792.8002 344438.799900001, 576015.3995 345033.104599999, 579638.5019 345432.4003, 579229.0027 344747.996200001, 579999.9731 345155.793, 581046.7996 345709.5009, 581974.2783 345290.091, 583522.7337 345142.7732, 583939.3079 344276.2302, 585295.4984 344887.799900001, 585499.9003 345617.198899999, 584844.0992 345738.4, 586841.7996 345764.9001, 586876.6202 345754.1796, 589046.8999 345085.999399999, 589014.1011 345927.398600001, 591578.4965 345587.195900001, 591598.2022 343845.9045, 592919.3001 343581.5001, 593216.3037 344178.8191, 596071.1973 344320.7985, 596176.5 344906.301000001, 597261.0998 344192.595100001, 600000.0026 344772.297499999, 600501.3008 344878.399800001, 602554.326 344875.292199999, 602647.4003 344041.498400001, 602823.5973 345009.8014, 603962.603 345392.2018, 600927.1352 346290.8158, 600000.026 346070.0755, 598704.6308 345761.6481, 600000.0213 346650.304500001)), ((581738.5058 346605.218699999, 584801.4026 345877.503, 582350.7972 345633.4027, 581239.1002 346376.799799999, 580122.5035 345595.103700001, 580233.0368 346549.0606, 579999.997 346541.125600001, 578807.004 346500.5045, 579999.9938 346638.302200001, 580695.9025 346718.684, 581738.5058 346605.218699999)))",
                        },
                        "openuk_network": {
                            "name": "Eastern Paediatric Epilepsy Network",
                            "boundary_identifier": "EPEN",
                            "country": "England",
                            "publication_date": "2022-12-08",
                        },
                        "london_borough": "null",
                        "country": {
                            "boundary_identifier": "E92000001",
                            "name": "England",
                            "welsh_name": "Lloegr",
                            "bng_e": 394883,
                            "bng_n": 370883,
                            "long": -2.07811,
                            "lat": 53.235,
                            "globalid": "f6b76559-3626-49b8-b50b-bd15efcb0505",
                            "geom": "SRID=27700;MULTIPOLYGON (((87801.3597999997 8851.28209999949, 89245.0637999997 8124.85170000046, 89235.8831000002 8080.29810000025, 88576.3450999996 8238.63230000064, 88539.4034000002 8272.40130000003, 88258.0983999996 7054.10009999946, 88183.6489000004 7119.18600000069, 87476.3640999999 7867.31149999984, 87801.3597999997 8851.28209999949)), ((93203.2527999999 11105.0567000005, 92271.3982999995 9909.10280000046, 91191.9961999999 10139.5968999993, 91071.6385000004 9216.94529999979, 90931.5833000001 9473.57740000077, 90494.2991000004 10370.0009000003, 90457.8930000002 10341.5502000004, 90446.7599999998 10361.9499999993, 90436.4504000004 10324.7931999993, 89918.4528999999 9919.98729999922, 89496.5221999995 10247.4093999993, 89430.3975999998 10357.4045000002, 90787.5016999999 10729.8979000002, 90715.3874000004 11057.2415999994, 90646.4665999999 12066.8505000006, 91728.7001999998 12925.2994999997, 93194.4424000001 11947.8482000008, 93203.2527999999 11105.0567000005)), ((89298.4342999998 13377.5913999993, 89256.8280999996 13370.2675999999, 88543.8958000001 15760.4541999996, 88431.1198000005 16475.7997999992, 90197.7198000001 14939.6864, 90237.2862 14759.3849999998, 89298.4342999998 13377.5913999993)), ((88116.8282000003 14821.0285, 87633.8493999997 14239.2076999992, 87323.1118000001 14539.1359999999, 87553.1106000002 16536.7806000002, 88242.8037999999 15229.7997999992, 88116.8282000003 14821.0285)), ((92295.8372 17523.8570000008, 92518.585 16572.0244999994, 92563.4961000001 16152.9955000002, 94479.2006000001 15674.352, 94373.4485999998 15626.5801999997, 92851.8343000002 15039.8060999997, 92690.9401000002 15108.3328000009, 92134.4094000002 15492.0109000001, 92136.6100000003 15532.2899999991, 92120.1642000005 15501.8317000009, 91572.7240000004 15879.2426999994, 91483.3017999995 16048.1303000003, 92147.6819000002 17254.7774, 92371.6100000003 17082.9100000001, 92287.0395999998 17507.8787999991, 92295.8372 17523.8570000008)), ((403186.765 88036.9890000001, 402809.607 87405.0989999995, 400940.748 88090.2760000005, 402549.492 88354.6459999997, 403186.765 88036.9890000001)), ((207459.685 90573.1254999992, 207477.4688 90538.6870000008, 207443.7855 90541.3328000009, 207459.685 90573.1254999992)), ((431502.811 90619.466, 431788.833 89708.5638999995, 431413.4985 89877.5, 431502.811 90619.466)), ((448598.8753 96622.7377000004, 449741.9273 96035.5208999999, 449826.4953 96059.0976999998, 450702.75 92514.5700000003, 450073.5713 96127.9801000003, 451254.8 96457.2956000008, 453160.446 94966.9149999991, 453546.982 93488.6659999993, 454078.335 94021.1209999993, 454576.6692 93830.8281999994, 455392.0457 93136.6480999999, 455376.4898 93107.8546999991, 455427.7272 93106.2703000009, 455527.0111 93021.7437999994, 455940.2067 93090.4231000002, 459759.08 92972.3340000007, 460000.0331 92871.5291000009, 463013.726 91610.7239999995, 463939.563 88695.4489999991, 463451.98 89300.0299999993, 463079 88586.5, 464654.1642 88697.2413999997, 465765.1508 87960.9010000005, 465775.24 87952.0590000004, 463805.998 85421.9079999998, 461464.63 85100.1999999993, 460000.0349 84035.5001999997, 459456.95 83640.6999999993, 458389.5743 80000.0151000004, 457750.42 77819.9399999995, 449573.6784 75326.6272999998, 446443.6609 78128.1224000007, 444390.9303 80000.0182000007, 443315.4 80980.8000000007, 439999.9987 82440.8852999993, 439120.3 82828.3000000007, 436533.7 85360.1999999993, 429318.199 84910.7129999995, 432016.19 86611.8000000007, 433839.519 89819.3577999994, 433960.2514 89831.5745999999, 435291.32 89805.0099999998, 434719.95 89690.8699999992, 435420.34 88821.3399999999, 435647.63 89154.3900000006, 435125.41 89675.6099999994, 437556.084 90126.4069999997, 439999.9931 91670.0693999995, 440465.0016 91963.7858000007, 441245.8162 91897.9857000001, 441617.832 91805.2650000006, 440893.61 91826.1899999995, 441535.9 91165, 441450.49 90794.9900000002, 441544.2 89486.6999999993, 441615.99 90704.3900000006, 442619.32 90264.4499999993, 441879.007 91218.5399999991, 443520.51 91609.5199999996, 442193.6361 92052.4540999997, 442776.2003 92308.5465999991, 445729.71 93475.9499999993, 448598.8753 96622.7377000004)), ((464020.65 102122.5, 463398.181 101946.029999999, 463739.337 102733.824999999, 464020.65 102122.5)), ((473985 103219.699999999, 473570.571 101410.116, 472432.779 101556.742000001, 473895.572 100696.92, 473446.0219 100000.004699999, 472886.87 99133.1789999995, 474024.924 99130.5390000008, 473495.584 98470.841, 474985.596 99178.1730000004, 474910.798 98099.8004000001, 473449.9026 98302.5755000003, 468901.313 99186.6030000001, 468812.3959 100000.050799999, 468805.75 100060.85, 470955.756 100350.005999999, 471714.77 102847.911, 471225.836 103536.297, 472798.776 104429.993000001, 473985 103219.699999999)), ((467404.9 104009.529999999, 467455.7255 100000.0019, 467462.945 99430.466, 468189.5113 100000.0383, 468357.035 100131.364, 468387.9658 100000.042300001, 468549.029 99316.2229999993, 464354.7885 97967.5493000001, 463873.8456 98406.3004000001, 462904.45 99365, 462833.2331 100000.0063, 462699.379 101193.517999999, 464129.72 101451.91, 463876.9319 101752.5353, 464158.0523 102278.3957, 463910.0049 102999.386700001, 463468.651 103403.137, 464580.8 103209.199999999, 465173.5 104571.949999999, 467404.9 104009.529999999)), ((213648.9464 143396.8298, 213329.104 143304.5988, 212711.2026 144881.397500001, 213009.0084 147774.6261, 213057.1921 148206.0195, 214579.3624 143694.1908, 213648.9464 143396.8298)), ((581512.2004 170173.0978, 582038.1034 169506.0987, 580761.8009 169538.1995, 581512.2004 170173.0978)), ((579729.6017 170287.0952, 578268.9974 170135.5985, 578449.4982 170778.804400001, 579729.6017 170287.0952)), ((586672.9985 171595.3007, 587540.3887 169858.965299999, 586012.5031 169985.8014, 585513.8996 170844.5956, 586672.9985 171595.3007)), ((586911.8993 172676.2004, 587000 171806.449999999, 585059.9018 172090.9988, 585517.1976 172807.1039, 586911.8993 172676.2004)), ((601839.548 172638.686000001, 605432.62 167805.1, 601796.39 165693.09, 599999.9912 166764.095000001, 599004.89 167357.369999999, 598958.79 166746.27, 597804.58 167449.779999999, 598583.61 166721.4, 597763.83 166557.25, 595419.19 167429.48, 592638.13 167065.539999999, 592428.22 169094.187999999, 590180.52 170347.85, 589355.77 171892.42, 590128.93 171311.140000001, 591105.45 172059.35, 590272.37 173034.130000001, 591150.85 175481.5, 593359.0544 175035.543400001, 594098.902 174843.942500001, 596417.851 173408.504000001, 600000.0109 172899.878900001, 601839.548 172638.686000001)), ((596672.7982 191182.9038, 595752.6989 188887.400900001, 594632.698 191154.202, 596117.4027 192362.7961, 596672.7982 191182.9038)), ((600000.0034 189456.1216, 598787.4998 188343.896500001, 596958.3989 188572.700999999, 595950.5969 188848.801899999, 596769.0016 190774.8006, 596865.6008 190839.202199999, 596671.3966 192122.9047, 598661.004 192375.102499999, 599100.8038 194504.2031, 600000.0098 194651.6843, 604827.1967 195443.404200001, 603038.8017 192243.600199999, 600000.0034 189456.1216)), ((592642.1 206298.199999999, 591442.4 205889.199999999, 590347.8 206494.699999999, 591383.5 206752.699999999, 592642.1 206298.199999999)), ((588013.2 207051.5, 588414.6 205552.4, 587158 205793.800000001, 588013.2 207051.5)), ((595895.7796 212108.3464, 597174.6681 211522.407299999, 595601.4115 211639.2466, 595895.7796 212108.3464)), ((603307.33 212550.789999999, 600332.49 212320.74, 600241.39 213700.439999999, 601767.793 214816.298599999, 602971.5961 216106.2995, 604553.1765 216385.299699999, 606877.91 215729.74, 606977.56 214754.470000001, 603307.33 212550.789999999)), ((621881.48 224178.74, 620852.7 223982, 621637.6796 224848.919199999, 622038.6 225106.300000001, 621881.48 224178.74)), ((624670.1 225214.5, 624763.5 224419.6, 624157.9009 224557.498, 624670.1 225214.5)), ((624278.67 225558.810000001, 623466.28 223898.27, 622184 224556.699999999, 622378.6 225251.800000001, 624278.67 225558.810000001)), ((622611.4 226622.199999999, 623246.5 225860.300000001, 622477.3 225927.300000001, 622611.4 226622.199999999)), ((595697.674 344703.082, 594312.07 344414.050000001, 595019.77 344898, 595697.674 344703.082)), ((595195.716 345135.074999999, 593521.009 344070.135, 593968.62 344474.960000001, 593211.67 344971.26, 593931.03 344639.07, 594440.62 345407.470000001, 595195.716 345135.074999999)), ((593338.87 345929.529999999, 593763.86 344740.800000001, 592572.88 345927.07, 592961.97 345165.199999999, 592661.99 345631.130000001, 591815.28 344853.609999999, 592553.32 346211.98, 593338.87 345929.529999999)), ((581029.7055 346682.358100001, 584796.517 345851.684, 582813 346256.9, 582490.1 345672.9, 582624.1 346280.800000001, 582112 345807.800000001, 581584.1394 346352.2862, 581430.846 345834.921, 581569.8 346513.9, 581202.16 345993.380000001, 580688.79 346678.25, 581127.49 346014.15, 580373.04 346246.939999999, 580175.044 345591.855, 580389.827 346638.41, 579999.9946 346613.0955, 578523.894 346517.242000001, 579999.9919 346696.1734, 580427.0625 346747.942500001, 581029.7055 346682.358100001)), ((497790.3988 421987.3968, 496810.3991 421526.0988, 495603.0995 422511.4968, 497790.3988 421987.3968)), ((318816.4 467718.5, 318187.2 467376.35, 318799.02 467560.859999999, 318524.83 466974, 319999.9829 465813.4561, 320218.3 465641.699999999, 319999.9712 465104.217900001, 319817.63 464655.33, 320000.0004 464531.3159, 320888.42 463927.18, 321214.35 462410.359999999, 322943.2 462787.199999999, 323224.03 462006.76, 323307.2 462782.050000001, 323283.31 461870.300000001, 320878.2 461977, 320000.0102 463560.8507, 317158.1 468686.35, 316717.75 472646.9, 318306.41 473451.369999999, 317336.85 472528.4, 318663.3 468936.550000001, 318816.4 467718.5)), ...",
                        },
                    },
                    response_only=True,
                ),
            ],
        ),
    },
)
class OrganisationViewSet(viewsets.ReadOnlyModelViewSet):
    """
    This endpoint returns a list of NHS Organisations (Acute or Community Hospitals), with nested parent regions or organisations, from the UK, or a single organisation againts and ODS code.

    Filter Parameters:

    `ods_code`
    `name`
    `website`
    `address1`
    `address2`
    `address3`
    `telephone`
    `city`
    `county`
    `latitude`
    `longitude`
    `postcode`
    `active`
    `published_at`
    `trust`
    `local_health_board`
    `integrated_care_board`
    `nhs_england_region`
    `openuk_network`
    `paediatric_diabetes_unit`
    `london_borough`
    `country`

    If none are passed, a list is returned.

    """

    queryset = Organisation.objects.all().order_by("name")
    serializer_class = OrganisationSerializer
    lookup_field = "ods_code"
    filterset_fields = [
        "ods_code",
        "name",
        "website",
        "address1",
        "address2",
        "address3",
        "telephone",
        "city",
        "county",
        "latitude",
        "longitude",
        "postcode",
        "active",
        "published_at",
        "paediatric_diabetes_unit",
        "trust",
        "local_health_board",
        "integrated_care_board",
        "nhs_england_region",
        "openuk_network",
        "london_borough",
        "country",
    ]
    filter_backends = (DjangoFilterBackend,)
